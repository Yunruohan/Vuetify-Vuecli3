{"remainingRequest":"/Users/dmsun/Desktop/workspace/solar/node_modules/babel-loader/lib/index.js!/Users/dmsun/Desktop/workspace/solar/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/dmsun/Desktop/workspace/solar/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/dmsun/Desktop/workspace/solar/src/pages/welfare/views/Banner.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/dmsun/Desktop/workspace/solar/src/pages/welfare/views/Banner.vue","mtime":1547889925000},{"path":"/Users/dmsun/Desktop/workspace/solar/node_modules/cache-loader/dist/cjs.js","mtime":1547890140000},{"path":"/Users/dmsun/Desktop/workspace/solar/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/dmsun/Desktop/workspace/solar/node_modules/cache-loader/dist/cjs.js","mtime":1547890140000},{"path":"/Users/dmsun/Desktop/workspace/solar/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _regeneratorRuntime from \"/Users/dmsun/Desktop/workspace/solar/node_modules/@babel/runtime/regenerator\";\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } } function _next(value) { step(\"next\", value); } function _throw(err) { step(\"throw\", err); } _next(); }); }; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { ShelfCtrl, BannerAdd } from './common/index';\nimport Http from '@/http';\nexport default {\n  data: function data() {\n    return {\n      src: '',\n      imgShow: false,\n      headers: [{\n        text: 'ID',\n        align: 'center',\n        sortable: false\n      }, {\n        text: '权重',\n        align: 'center',\n        sortable: false\n      }, {\n        text: '广告名称',\n        align: 'center',\n        sortable: false\n      }, {\n        text: '图片',\n        align: 'center',\n        sortable: false\n      }, {\n        text: '跳转链接',\n        align: 'center',\n        sortable: false\n      }, {\n        text: '操作',\n        align: 'center',\n        sortable: false\n      }],\n      search: '',\n      list: [],\n      showCtrl: false,\n      page: 1,\n      pageCount: 10,\n      totalItems: '',\n      selectItems: [{\n        value: 10,\n        text: '10条/页'\n      }, {\n        value: 20,\n        text: '20条/页'\n      }, {\n        value: 50,\n        text: '50条/页'\n      }],\n      nodatatext: '正在加载',\n      loading: true,\n      visi: false,\n      stat: '',\n      id: ''\n    };\n  },\n  computed: {\n    'pageNumber': function pageNumber() {\n      return Math.ceil(this.totalItems / this.pageCount);\n    }\n  },\n  watch: {\n    'page': function page(val) {\n      this.getList();\n    }\n  },\n  methods: {\n    close: function close() {\n      this.visi = false;\n    },\n    statusCtrl: function statusCtrl() {\n      var _this = this;\n\n      this.list.map(function (item) {\n        if (item.id === _this.id) {\n          item.up_lower = 1 ^ _this.stat;\n        }\n      });\n    },\n    ctrl: function ctrl() {\n      var _this2 = this;\n\n      this.list.map(function (item) {\n        if (item.id === _this2.id) {\n          item.up_lower = 0 ^ _this2.stat;\n        }\n      });\n    },\n    swit: function swit(stat, id) {\n      this.visi = true;\n      this.stat = stat;\n      this.id = id;\n    },\n    pagiChange: function pagiChange() {\n      this.getList();\n    },\n    editItem: function editItem(item) {\n      this.item = item;\n\n      if (this.item.id) {\n        this.edit = true;\n      }\n    },\n    showImg: function showImg(src) {\n      this.src = src;\n      this.imgShow = true;\n    },\n    getList: function () {\n      var _getList = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var res, list;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return Http.get(\"/travel/banner/info?page=\".concat(this.page - 1, \"&pageSize=\").concat(this.pageCount));\n\n              case 2:\n                res = _context.sent;\n                this.loading = false;\n\n                if (res && res.data) {\n                  if (res.data.respcd === '0000') {\n                    list = _toConsumableArray(res.data.data.list);\n                    this.list = _toConsumableArray(list);\n\n                    if (this.list.length === 0) {\n                      this.nodatatext = '暂无数据';\n                    } // 设置分页\n\n\n                    this.totalItems = res.data.data.total;\n                  } else {\n                    // 问题提示\n                    this.$store.dispatch('setAlert', {\n                      alert: true,\n                      alertContent: res.data.respmsg,\n                      alertType: 'error'\n                    });\n                  }\n                }\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function getList() {\n        return _getList.apply(this, arguments);\n      };\n    }()\n  },\n  components: {\n    ShelfCtrl: ShelfCtrl,\n    BannerAdd: BannerAdd\n  },\n  created: function created() {\n    this.getList();\n  }\n};",{"version":3,"sources":["Banner.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"banner pa-3\">\n    <banner-add @ctrl=\"getList\"/>\n    <v-card flat class=\"mt-2\">\n    <v-data-table\n      :headers=\"headers\"\n      :items=\"list\"\n      hide-actions\n      class=\"elevation-1\"\n      :search=\"search\"\n      :loading=\"loading\"\n      :no-data-text=\"nodatatext\"\n    >\n      <template slot=\"items\" slot-scope=\"props\">\n        <td class=\"text-xs-center\">{{ props.item.id }}</td>\n        <td class=\"text-xs-center\">{{ props.item.weight }}</td>\n        <td class=\"text-xs-center\">{{ props.item.name }}</td>\n        <td class=\"text-xs-center\">\n          <v-img @click=\"showImg(props.item.image)\" :src='props.item.image' aspect-ratio=\"1.7\" v-if=\"props.item.image\"></v-img>\n        </td>\n        <td class=\"text-xs-center\">\n          <a target=\"blank\" :href=\"props.item.url\" v-if=\"props.item.url\">{{props.item.url}}</a>\n        </td>\n        <td class=\"justify-center layout align-center\">\n          <v-switch v-model=\"props.item.up_lower\" color=\"primary\" :messages=\"props.item.up_lower ? '已上架' : '已下架'\" @change=\"swit(props.item.up_lower, props.item.id)\" class=\"justify-center\"></v-switch>\n          <banner-add :item=\"props.item\" @ctrl=\"getList\"/>\n        </td>\n      </template>\n    </v-data-table>\n    <div class=\"pagination-container\">\n      <span class=\"pagination-total\">共 {{totalItems}} 条</span>\n      <v-select\n        :items=\"selectItems\"\n        height=\"20\"\n        label=\"10页/条\"\n        solo\n        v-model=\"pageCount\"\n        @change=\"pagiChange\"\n      ></v-select>\n      <v-pagination\n        v-model=\"page\"\n        :length=\"pageNumber\"\n        :total-visible=\"7\"\n      ></v-pagination>\n    </div>\n    </v-card>\n    <v-dialog\n      v-model=\"imgShow\" attach=\".banner\"\n    >\n      <v-card class=\"pa-0\" d-flex>\n        <img :src=\"src\" alt=\"\" style=\"max-width: 100%;\">\n      </v-card>\n    </v-dialog>\n    <shelf-ctrl type=\"ad\" :visi=\"visi\" :status=\"stat\" :id=\"id\" @close=\"close\" @statusCtrl=\"statusCtrl\" @ctrl=\"ctrl\"/>\n  </div>\n</template>\n<script>\nimport { ShelfCtrl, BannerAdd } from './common/index'\nimport Http from '@/http'\nexport default {\n  data () {\n    return {\n      src: '',\n      imgShow: false,\n      headers: [\n        { text: 'ID', align: 'center', sortable: false },\n        { text: '权重', align: 'center', sortable: false },\n        { text: '广告名称', align: 'center', sortable: false },\n        { text: '图片', align: 'center', sortable: false },\n        { text: '跳转链接', align: 'center', sortable: false },\n        { text: '操作', align: 'center', sortable: false }\n      ],\n      search: '',\n      list: [],\n      showCtrl: false,\n      page: 1,\n      pageCount: 10,\n      totalItems: '',\n      selectItems: [{\n        value: 10,\n        text: '10条/页'\n      }, {\n        value: 20,\n        text: '20条/页'\n      }, {\n        value: 50,\n        text: '50条/页'\n      }],\n      nodatatext: '正在加载',\n      loading: true,\n      visi: false,\n      stat: '',\n      id: ''\n    }\n  },\n  computed: {\n    'pageNumber': function () {\n      return Math.ceil(this.totalItems / this.pageCount)\n    }\n  },\n  watch: {\n    'page': function (val) {\n      this.getList()\n    }\n  },\n  methods: {\n    close () {\n      this.visi = false\n    },\n    statusCtrl () {\n      this.list.map(item => {\n        if (item.id === this.id) {\n          item.up_lower = 1 ^ this.stat\n        }\n      })\n    },\n    ctrl () {\n      this.list.map(item => {\n        if (item.id === this.id) {\n          item.up_lower = 0 ^ this.stat\n        }\n      })\n    },\n    swit (stat, id) {\n      this.visi = true\n      this.stat = stat\n      this.id = id\n    },\n    pagiChange () {\n      this.getList()\n    },\n    editItem (item) {\n      this.item = item\n      if (this.item.id) {\n        this.edit = true\n      }\n    },\n    showImg (src) {\n      this.src = src\n      this.imgShow = true\n    },\n    async getList () {\n      let res = await Http.get(`/travel/banner/info?page=${this.page - 1}&pageSize=${this.pageCount}`)\n      this.loading = false\n      if (res && res.data) {\n        if (res.data.respcd === '0000') {\n          let list = [...res.data.data.list]\n          this.list = [...list]\n          if (this.list.length === 0) {\n            this.nodatatext = '暂无数据'\n          }\n          // 设置分页\n          this.totalItems = res.data.data.total\n        } else {\n          // 问题提示\n          this.$store.dispatch('setAlert', {\n            alert: true,\n            alertContent: res.data.respmsg,\n            alertType: 'error'\n          })\n        }\n      }\n    }\n  },\n  components: {\n    ShelfCtrl,\n    BannerAdd\n  },\n  created () {\n    this.getList()\n  }\n}\n</script>\n<style scoped>\n.flex-grow-4{flex-grow: 4!important;}\ntd{text-align: center;}\n</style>\n"],"sourceRoot":"src/pages/welfare/views"}]}
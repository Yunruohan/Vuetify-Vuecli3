{"remainingRequest":"/Users/dmsun/Desktop/workspace/solar/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/dmsun/Desktop/workspace/solar/src/pages/trade/views/channel.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/dmsun/Desktop/workspace/solar/src/pages/trade/views/channel.vue","mtime":1547889925000},{"path":"/Users/dmsun/Desktop/workspace/solar/node_modules/cache-loader/dist/cjs.js","mtime":1547890140000},{"path":"/Users/dmsun/Desktop/workspace/solar/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/dmsun/Desktop/workspace/solar/node_modules/cache-loader/dist/cjs.js","mtime":1547890140000},{"path":"/Users/dmsun/Desktop/workspace/solar/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* eslint-disable */\nimport Http from '@/http'\nexport default {\n  data () {\n    return {\n      src: '',\n      imgShow: false,\n      headers: [\n        { text: '通道名称', align: 'center', sortable: false },\n        { text: '通道名称（英）', align: 'center', sortable: false },\n        { text: '通道代码', align: 'center', sortable: false },\n        { text: '交易类型', align: 'center', sortable: false },\n        { text: '通道成本（工作日）', align: 'center', sortable: false },\n        { text: '通道成本（非工作日）', align: 'center', sortable: false },\n        { text: '状态', align: 'center', sortable: false },\n        { text: '操作', align: 'center', sortable: false }\n      ],\n      searchParams: {\n        chnlid: '',\n        trade_type: '',\n        available: ''\n      },\n      list: [],\n      showCtrl: false,\n      page: 1,\n      pageCount: 10,\n      totalItems: '',\n      selectItems: [{\n        value: 10,\n        text: '10条/页'\n      }, {\n        value: 20,\n        text: '20条/页'\n      }, {\n        value: 50,\n        text: '50条/页'\n      }],\n      nodatatext: '正在加载',\n      loading: true,\n      visi: false,\n      stat: '',\n      id: '',\n      tType: '',\n      tradeTypes: [],\n      available: '',\n      availableItems: [\n        {id: '0', name: '关闭'},\n        {id: '1', name: '开启'}\n      ],\n      dialog: false,\n      submitLoading: false,\n      formItems: {\n        chnl_name: '',\n        chnl_name_en: '',\n        chnlid: '',\n        trade_type: '',\n        weeks_ratio: '',\n        weekend_ratio: '',\n        available: '',\n        id: '',\n        fixed_fee: ''\n      },\n      formItemsRule: {\n        chnl_name: [\n          v => !!v || '通道名称不能为空'\n        ],\n        chnl_name_en: [\n          v => !!v || '通道英文名称不能为空'\n        ],\n        chnlid: [\n          v => /^\\d{1,6}$/.test(v) || '请输入六位以内整数'\n        ],\n        trade_type: [\n          v => !!v || '交易类型不能为空'\n        ],\n        weeks_ratio: [\n          v => (/^\\d+.?\\d{0,6}$/.test(v) && v <= 1) || '请输入不超过1的数字 小数限定六位'\n        ],\n        weekend_ratio: [\n          v => (/^\\d+.?\\d{0,6}$/.test(v) && v <= 1) || '请输入不超过1的数字 小数限定六位'\n        ],\n        available: [\n          v => !!v || '状态不能为空'\n        ],\n      },\n      chnlid_arr: [],\n      valid: false,\n      mode: ''\n    }\n  },\n  computed: {\n    'pageNumber': function () {\n      return Math.ceil(this.totalItems / this.pageCount)\n    }\n  },\n  watch: {\n    'page': function (val) {\n      this.getList()\n    }\n  },\n  filters: {\n    tradeType: function (val, arr) {\n      let name = ''\n      const item = arr.filter(v => v.key == val)\n      name = item[0] && item[0]['val']\n      return name\n    },\n    statusFilter: function (val) {\n      const obj = {\n        '0': '关闭',\n        '1': '开启'\n      }\n      return obj[val]\n    }\n  },\n  methods: {\n    add () {\n      this.dialog = true\n      this.mode = 'add'\n    },\n    pagiChange () {\n      this.getList()\n    },\n    async getList () {\n      this.loading = true\n      // 不做分页查询 返回全部\n      let res = await Http.post(`/chnltrade/manage/list?page=${this.page}&pagesize=${this.pageCount}`, this.searchParams)\n      this.loading = false\n      this.list = [...res.list]\n      if (this.list.length === 0) {\n        this.nodatatext = '暂无数据'\n      }\n      this.list.map(item => {\n        item.available = item.available.toString()\n      })\n      this.totalItems = res.total\n      \n    },\n    async submit () {\n      if (!this.$refs.form.validate()) {\n        return\n      }\n      if (this.formItems.hasOwnProperty('id') && !this.formItems.id && this.mode == 'add') {\n        delete this.formItems.id\n      }\n      if (this.formItems.hasOwnProperty('fixed_fee') && this.mode == 'add') {\n        delete this.formItems.fixed_fee\n      }\n      this.submitLoading = true\n      let res = await Http.post(`/chnltrade/manage/handle`, this.formItems)\n      this.submitLoading = false\n      this.$refs.form.reset()\n      this.dialog = false\n      if (!res.respcd || res.respcd == '0000') {\n        this.$store.dispatch('setSnackbar', {\n          showSnackbar: true,\n          snackbarText: '操作成功'\n        })\n      }\n      this.getList()\n    },\n    edit (item) {\n      this.dialog = true\n      this.mode = 'edit'\n      this.formItems = {...item}\n    },\n    async getTradeTypes () {\n      let res = await Http.get(`/chnltrade/manage/tradetypes`)\n      this.tradeTypes = [...res]\n    },\n    async getNameList () {\n      let res = await Http.get(`/chnltrade/manage/namelist`)\n      this.chnlid_arr = [...res]\n    },\n    cancel () {\n      this.dialog = false\n      this.$refs.form.reset()\n    }\n  },\n  components: {\n    //\n  },\n  created () {\n    this.getTradeTypes()\n    this.getList()\n    this.getNameList()\n  }\n}\n",{"version":3,"sources":["channel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"channel.vue","sourceRoot":"src/pages/trade/views","sourcesContent":["<template>\n  <div class=\"full-s-v\">\n    <v-card flat class=\"mt-2\">\n    <v-layout justify-space-between>\n      <v-form ref=\"searchForm\" class=\"f-wrap\">\n        <v-select v-model=\"searchParams.chnlid\" :items=\"chnlid_arr\" item-text=\"val\" item-value=\"key\" no-data-text=\"暂无数据\" placeholder=\"请选择通道\" label=\"通道名称\" class=\"f-i\" clearable></v-select>\n        <v-select v-model=\"searchParams.trade_type\" :items=\"tradeTypes\" item-text=\"val\" item-value=\"key\" no-data-text=\"暂无数据\" placeholder=\"请选择交易类型\" label=\"交易类型\" class=\"f-i\" clearable></v-select>\n        <v-select v-model=\"searchParams.available\" :items=\"availableItems\" item-text=\"name\" item-value=\"id\" no-data-text=\"暂无数据\" placeholder=\"请选择状态\" label=\"状态\" clearable></v-select>\n      </v-form>\n      <v-layout justify-end>\n        <v-btn @click=\"getList\" color=\"primary\">查找</v-btn>\n        <v-btn @click=\"add\" color=\"primary\" dark>创建</v-btn>\n      </v-layout>\n    </v-layout>\n    <v-data-table\n      :headers=\"headers\"\n      :items=\"list\"\n      hide-actions\n      class=\"elevation-1\"\n      :loading=\"loading\"\n      :no-data-text=\"nodatatext\"\n    >\n      <template slot=\"items\" slot-scope=\"props\">\n        <td class=\"text-xs-center\">{{ props.item.chnl_name }}</td>\n        <td class=\"text-xs-center\">{{ props.item.chnl_name_en }}</td>\n        <td class=\"text-xs-center\">{{ props.item.chnlid }}</td>\n        <td class=\"text-xs-center\">{{ props.item.trade_type | tradeType(tradeTypes) }}</td>\n        <td class=\"text-xs-center\">{{ props.item.weeks_ratio }}</td>\n        <td class=\"text-xs-center\">{{ props.item.weekend_ratio }}</td>\n        <td class=\"text-xs-center\">{{ props.item.available | statusFilter }}</td>\n        <td class=\"justify-center layout align-center\">\n          <v-btn color=\"primary\" @click=\"edit(props.item)\">编辑</v-btn>\n        </td>\n      </template>\n    </v-data-table>\n    <div class=\"pagination-container\">\n      <span class=\"pagination-total\">共 {{totalItems}} 条</span>\n      <v-select\n        :items=\"selectItems\"\n        height=\"20\"\n        label=\"10页/条\"\n        solo\n        v-model=\"pageCount\"\n        @change=\"pagiChange\"\n      ></v-select>\n      <v-pagination\n        v-model=\"page\"\n        :length=\"pageNumber\"\n        :total-visible=\"7\"\n      ></v-pagination>\n    </div>\n    </v-card>\n    <v-dialog v-model=\"dialog\" fullscreen hide-overlay transition=\"dialog-bottom-transition\">\n      <v-card>\n      <v-form ref=\"form\" v-model=\"valid\" class=\"v-f\">\n        <v-text-field v-model=\"formItems.chnl_name\" label=\"通道名称\" required placeholder=\"请输入通道名称（中）\" :rules=\"formItemsRule.chnl_name\"></v-text-field>\n        <v-text-field v-model=\"formItems.chnl_name_en\" label=\"通道名称（英）\" required placeholder=\"请输入通道名称（英）\" :rules=\"formItemsRule.chnl_name_en\"></v-text-field>\n        <v-text-field v-model=\"formItems.chnlid\" label=\"通道代码\" required placeholder=\"请输入通道代码\" :rules=\"formItemsRule.chnlid\"></v-text-field>\n        <v-select v-model=\"formItems.trade_type\" :items=\"tradeTypes\" item-text=\"val\" item-value=\"key\" no-data-text=\"暂无数据\" placeholder=\"请选择交易类型\" label=\"交易类型\" :rules=\"formItemsRule.trade_type\"></v-select>\n        <v-text-field v-model=\"formItems.weeks_ratio\" label=\"通道成本（工作日）\" required placeholder=\"请输入通道成本（工作日）\" :rules=\"formItemsRule.weeks_ratio\"></v-text-field>\n        <v-text-field v-model=\"formItems.weekend_ratio\" label=\"通道成本（非工作日）\" required placeholder=\"请输入通道成本（非工作日）\" :rules=\"formItemsRule.weekend_ratio\"></v-text-field>\n        <v-select v-model=\"formItems.available\" :items=\"availableItems\" item-text=\"name\" item-value=\"id\" no-data-text=\"暂无数据\" placeholder=\"请选择状态\" label=\"状态\" :rules=\"formItemsRule.available\"></v-select>\n        <v-text-field v-model=\"formItems.id\" style=\"display: none\"></v-text-field>\n        <v-text-field v-model=\"formItems.fixed_fee\" style=\"display: none\"></v-text-field>\n        <v-btn\n          :disabled=\"!valid\"\n          @click=\"submit\"\n          color=\"primary\"\n          :loading=\"submitLoading\"\n        >\n          保存\n        </v-btn>\n        <v-btn @click=\"cancel\">取消</v-btn>\n      </v-form>\n      </v-card>\n    </v-dialog>\n  </div>\n</template>\n<script>\n/* eslint-disable */\nimport Http from '@/http'\nexport default {\n  data () {\n    return {\n      src: '',\n      imgShow: false,\n      headers: [\n        { text: '通道名称', align: 'center', sortable: false },\n        { text: '通道名称（英）', align: 'center', sortable: false },\n        { text: '通道代码', align: 'center', sortable: false },\n        { text: '交易类型', align: 'center', sortable: false },\n        { text: '通道成本（工作日）', align: 'center', sortable: false },\n        { text: '通道成本（非工作日）', align: 'center', sortable: false },\n        { text: '状态', align: 'center', sortable: false },\n        { text: '操作', align: 'center', sortable: false }\n      ],\n      searchParams: {\n        chnlid: '',\n        trade_type: '',\n        available: ''\n      },\n      list: [],\n      showCtrl: false,\n      page: 1,\n      pageCount: 10,\n      totalItems: '',\n      selectItems: [{\n        value: 10,\n        text: '10条/页'\n      }, {\n        value: 20,\n        text: '20条/页'\n      }, {\n        value: 50,\n        text: '50条/页'\n      }],\n      nodatatext: '正在加载',\n      loading: true,\n      visi: false,\n      stat: '',\n      id: '',\n      tType: '',\n      tradeTypes: [],\n      available: '',\n      availableItems: [\n        {id: '0', name: '关闭'},\n        {id: '1', name: '开启'}\n      ],\n      dialog: false,\n      submitLoading: false,\n      formItems: {\n        chnl_name: '',\n        chnl_name_en: '',\n        chnlid: '',\n        trade_type: '',\n        weeks_ratio: '',\n        weekend_ratio: '',\n        available: '',\n        id: '',\n        fixed_fee: ''\n      },\n      formItemsRule: {\n        chnl_name: [\n          v => !!v || '通道名称不能为空'\n        ],\n        chnl_name_en: [\n          v => !!v || '通道英文名称不能为空'\n        ],\n        chnlid: [\n          v => /^\\d{1,6}$/.test(v) || '请输入六位以内整数'\n        ],\n        trade_type: [\n          v => !!v || '交易类型不能为空'\n        ],\n        weeks_ratio: [\n          v => (/^\\d+.?\\d{0,6}$/.test(v) && v <= 1) || '请输入不超过1的数字 小数限定六位'\n        ],\n        weekend_ratio: [\n          v => (/^\\d+.?\\d{0,6}$/.test(v) && v <= 1) || '请输入不超过1的数字 小数限定六位'\n        ],\n        available: [\n          v => !!v || '状态不能为空'\n        ],\n      },\n      chnlid_arr: [],\n      valid: false,\n      mode: ''\n    }\n  },\n  computed: {\n    'pageNumber': function () {\n      return Math.ceil(this.totalItems / this.pageCount)\n    }\n  },\n  watch: {\n    'page': function (val) {\n      this.getList()\n    }\n  },\n  filters: {\n    tradeType: function (val, arr) {\n      let name = ''\n      const item = arr.filter(v => v.key == val)\n      name = item[0] && item[0]['val']\n      return name\n    },\n    statusFilter: function (val) {\n      const obj = {\n        '0': '关闭',\n        '1': '开启'\n      }\n      return obj[val]\n    }\n  },\n  methods: {\n    add () {\n      this.dialog = true\n      this.mode = 'add'\n    },\n    pagiChange () {\n      this.getList()\n    },\n    async getList () {\n      this.loading = true\n      // 不做分页查询 返回全部\n      let res = await Http.post(`/chnltrade/manage/list?page=${this.page}&pagesize=${this.pageCount}`, this.searchParams)\n      this.loading = false\n      this.list = [...res.list]\n      if (this.list.length === 0) {\n        this.nodatatext = '暂无数据'\n      }\n      this.list.map(item => {\n        item.available = item.available.toString()\n      })\n      this.totalItems = res.total\n      \n    },\n    async submit () {\n      if (!this.$refs.form.validate()) {\n        return\n      }\n      if (this.formItems.hasOwnProperty('id') && !this.formItems.id && this.mode == 'add') {\n        delete this.formItems.id\n      }\n      if (this.formItems.hasOwnProperty('fixed_fee') && this.mode == 'add') {\n        delete this.formItems.fixed_fee\n      }\n      this.submitLoading = true\n      let res = await Http.post(`/chnltrade/manage/handle`, this.formItems)\n      this.submitLoading = false\n      this.$refs.form.reset()\n      this.dialog = false\n      if (!res.respcd || res.respcd == '0000') {\n        this.$store.dispatch('setSnackbar', {\n          showSnackbar: true,\n          snackbarText: '操作成功'\n        })\n      }\n      this.getList()\n    },\n    edit (item) {\n      this.dialog = true\n      this.mode = 'edit'\n      this.formItems = {...item}\n    },\n    async getTradeTypes () {\n      let res = await Http.get(`/chnltrade/manage/tradetypes`)\n      this.tradeTypes = [...res]\n    },\n    async getNameList () {\n      let res = await Http.get(`/chnltrade/manage/namelist`)\n      this.chnlid_arr = [...res]\n    },\n    cancel () {\n      this.dialog = false\n      this.$refs.form.reset()\n    }\n  },\n  components: {\n    //\n  },\n  created () {\n    this.getTradeTypes()\n    this.getList()\n    this.getNameList()\n  }\n}\n</script>\n<style scoped lang=\"scss\">\ntd{text-align: center;}\n.f-wrap{\n  display: flex;\n  justify-content: flex-start;\n}\n.f-i{\n  margin-right: 20px;\n}\n.v-f{\n  width: 50%;\n  margin: 0 auto;\n  padding: 20px;\n}\n</style>\n"]}]}
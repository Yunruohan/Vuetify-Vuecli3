{"remainingRequest":"/Users/dmsun/Desktop/workspace/solar/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/dmsun/Desktop/workspace/solar/src/pages/welfare/views/Coupon.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/dmsun/Desktop/workspace/solar/src/pages/welfare/views/Coupon.vue","mtime":1547889925000},{"path":"/Users/dmsun/Desktop/workspace/solar/node_modules/cache-loader/dist/cjs.js","mtime":1547890140000},{"path":"/Users/dmsun/Desktop/workspace/solar/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/dmsun/Desktop/workspace/solar/node_modules/cache-loader/dist/cjs.js","mtime":1547890140000},{"path":"/Users/dmsun/Desktop/workspace/solar/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { ShelfCtrl, CouponDetail, CouponAdd } from './common/index'\nimport Http from '@/http'\nexport default {\n  data () {\n    return {\n      headers: [\n        { text: 'ID', align: 'center', sortable: false },\n        { text: '优惠券名称', align: 'center', sortable: false },\n        { text: '库存', align: 'center', sortable: false },\n        { text: '商户', align: 'center', sortable: false },\n        { text: '地区', align: 'center', sortable: false },\n        { text: '操作', align: 'center', sortable: false },\n        { text: '详情', align: 'center', sortable: false }\n      ],\n      list: [],\n      page: 1,\n      pageCount: 10,\n      selectItems: [{\n        value: 10,\n        text: '10条/页'\n      }, {\n        value: 20,\n        text: '20条/页'\n      }, {\n        value: 50,\n        text: '50条/页'\n      }],\n      nodatatext: '正在加载',\n      loading: true,\n      couponDialog: false,\n      totalItems: '',\n      visi: false,\n      stat: '',\n      id: ''\n    }\n  },\n  computed: {\n    'pageNumber': function () {\n      return Math.ceil(this.totalItems / this.pageCount)\n    }\n  },\n  watch: {\n    'page': function (val) {\n      this.getList()\n    }\n  },\n  methods: {\n    close () {\n      this.visi = false\n    },\n    statusCtrl () {\n      this.list.map(item => {\n        if (item.id === this.id) {\n          item.status = 1 ^ this.stat\n        }\n      })\n    },\n    ctrl () {\n      this.list.map(item => {\n        if (item.id === this.id) {\n          item.status = 0 ^ this.stat\n        }\n      })\n    },\n    swit (stat, id) {\n      this.visi = true\n      this.stat = stat\n      this.id = id\n    },\n    pagiChange () {\n      this.getList()\n    },\n    async getList () {\n      let res = await Http.get(`/travel/goods/info?type=2&page=${this.page - 1}&pageSize=${this.pageCount}`)\n      this.loading = false\n      if (res && res.data) {\n        if (res.data.respcd === '0000') {\n          let list = [...res.data.data.list]\n          this.list = [...list]\n          if (this.list.length === 0) {\n            this.nodatatext = '暂无数据'\n          }\n          // 设置分页\n          this.totalItems = res.data.data.total\n        } else {\n          // 问题提示\n          this.$store.dispatch('setAlert', {\n            alert: true,\n            alertContent: res.data.respmsg,\n            alertType: 'error'\n          })\n        }\n      }\n    }\n  },\n  components: {\n    CouponDetail,\n    CouponAdd,\n    ShelfCtrl\n  },\n  created () {\n    this.getList()\n  }\n}\n",{"version":3,"sources":["Coupon.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Coupon.vue","sourceRoot":"src/pages/welfare/views","sourcesContent":["<template>\n  <div class=\"pa-3 coupon\">\n    <coupon-add @ctrl=\"getList\"/>\n    <v-card flat class=\"mt-2\">\n    <v-data-table\n      :headers=\"headers\"\n      :items=\"list\"\n      class=\"elevation-1\"\n      hide-actions\n      :loading=\"loading\"\n      :no-data-text=\"nodatatext\"\n    >\n      <template slot=\"items\" slot-scope=\"props\">\n        <td class=\"text-xs-center\">{{ props.item.id }}</td>\n        <td class=\"text-xs-center\">{{ props.item.name }}</td>\n        <td class=\"text-xs-center\">{{ props.item.bought}}/{{props.item.total }}</td>\n        <td class=\"text-xs-center\">{{ props.item.mchnt }}({{props.item.userid}})</td>\n        <td class=\"text-xs-center\">{{ props.item.area | formatArea }}</td>\n        <td class=\"px-0 justify-center align-center\">\n           <v-switch v-model=\"props.item.status\" :messages=\"props.item.status ? '已上架' : '已下架'\" @change=\"swit(props.item.status, props.item.id)\" class=\"justify-center\"></v-switch>\n        </td>\n        <td class=\"px-0 justify-center align-center\">\n          <coupon-detail :item=\"props.item\" @ctrl=\"getList\"/>\n        </td>\n      </template>\n    </v-data-table>\n    <div class=\"pagination-container\">\n      <span class=\"pagination-total\">共 {{totalItems}} 条</span>\n      <v-select\n        :items=\"selectItems\"\n        height=\"20\"\n        label=\"10页/条\"\n        solo\n        v-model=\"pageCount\"\n        @change=\"pagiChange\"\n      ></v-select>\n      <v-pagination\n        v-model=\"page\"\n        :length=\"pageNumber\"\n        :total-visible=\"7\"\n      ></v-pagination>\n    </div>\n    </v-card>\n    <shelf-ctrl type=\"coupon\" @statusCtrl=\"statusCtrl\" @ctrl=\"ctrl\" :visi=\"visi\" :status=\"stat\" :id=\"id\" @close=\"close\"/>\n  </div>\n</template>\n<script>\nimport { ShelfCtrl, CouponDetail, CouponAdd } from './common/index'\nimport Http from '@/http'\nexport default {\n  data () {\n    return {\n      headers: [\n        { text: 'ID', align: 'center', sortable: false },\n        { text: '优惠券名称', align: 'center', sortable: false },\n        { text: '库存', align: 'center', sortable: false },\n        { text: '商户', align: 'center', sortable: false },\n        { text: '地区', align: 'center', sortable: false },\n        { text: '操作', align: 'center', sortable: false },\n        { text: '详情', align: 'center', sortable: false }\n      ],\n      list: [],\n      page: 1,\n      pageCount: 10,\n      selectItems: [{\n        value: 10,\n        text: '10条/页'\n      }, {\n        value: 20,\n        text: '20条/页'\n      }, {\n        value: 50,\n        text: '50条/页'\n      }],\n      nodatatext: '正在加载',\n      loading: true,\n      couponDialog: false,\n      totalItems: '',\n      visi: false,\n      stat: '',\n      id: ''\n    }\n  },\n  computed: {\n    'pageNumber': function () {\n      return Math.ceil(this.totalItems / this.pageCount)\n    }\n  },\n  watch: {\n    'page': function (val) {\n      this.getList()\n    }\n  },\n  methods: {\n    close () {\n      this.visi = false\n    },\n    statusCtrl () {\n      this.list.map(item => {\n        if (item.id === this.id) {\n          item.status = 1 ^ this.stat\n        }\n      })\n    },\n    ctrl () {\n      this.list.map(item => {\n        if (item.id === this.id) {\n          item.status = 0 ^ this.stat\n        }\n      })\n    },\n    swit (stat, id) {\n      this.visi = true\n      this.stat = stat\n      this.id = id\n    },\n    pagiChange () {\n      this.getList()\n    },\n    async getList () {\n      let res = await Http.get(`/travel/goods/info?type=2&page=${this.page - 1}&pageSize=${this.pageCount}`)\n      this.loading = false\n      if (res && res.data) {\n        if (res.data.respcd === '0000') {\n          let list = [...res.data.data.list]\n          this.list = [...list]\n          if (this.list.length === 0) {\n            this.nodatatext = '暂无数据'\n          }\n          // 设置分页\n          this.totalItems = res.data.data.total\n        } else {\n          // 问题提示\n          this.$store.dispatch('setAlert', {\n            alert: true,\n            alertContent: res.data.respmsg,\n            alertType: 'error'\n          })\n        }\n      }\n    }\n  },\n  components: {\n    CouponDetail,\n    CouponAdd,\n    ShelfCtrl\n  },\n  created () {\n    this.getList()\n  }\n}\n</script>\n<style scoped>\n.flex-grow-4{flex-grow: 4!important;}\ntd{text-align: center;}\n</style>\n"]}]}
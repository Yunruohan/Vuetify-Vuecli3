{"remainingRequest":"/Users/dmsun/Desktop/workspace/solar/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/dmsun/Desktop/workspace/solar/src/pages/welfare/views/common/ViewProof.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/dmsun/Desktop/workspace/solar/src/pages/welfare/views/common/ViewProof.vue","mtime":1547889925000},{"path":"/Users/dmsun/Desktop/workspace/solar/node_modules/cache-loader/dist/cjs.js","mtime":1547890140000},{"path":"/Users/dmsun/Desktop/workspace/solar/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/dmsun/Desktop/workspace/solar/node_modules/cache-loader/dist/cjs.js","mtime":1547890140000},{"path":"/Users/dmsun/Desktop/workspace/solar/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport UploadImage from '../../components/UploadImage'\nimport Http from '@/http'\nexport default {\n  props: [\n    'item'\n  ],\n  data () {\n    return {\n      dialog: false,\n      loading3: false\n    }\n  },\n  watch: {\n    'dialog': function (val) {\n      if (val && this.item) {\n        this.$refs.uploadimage.previewImages.splice(0, 1, this.item.proof)\n        this.$refs.uploadimage.showAddBtn = false\n      }\n    }\n  },\n  methods: {\n    async submit () {\n      let img = this.$refs.uploadimage.previewImages[0]\n      if (this.item && this.item.id && img) {\n        let res = await Http.post('/travel/order/options', {\n          proof: img,\n          orderid: this.item.id,\n          status: 1\n        })\n        if (res && res.data) {\n          if (res.data.respcd === '0000') {\n            this.dialog = false\n            this.$emit('ctrl')\n            this.$store.dispatch('setAlert', {\n              alert: true,\n              alertContent: '操作成功',\n              alertType: 'success'\n            })\n          } else {\n            // 问题提示\n            this.$store.dispatch('setAlert', {\n              alert: true,\n              alertContent: res.data.respmsg,\n              alertType: 'error'\n            })\n          }\n        }\n      }\n    }\n  },\n  components: {\n    UploadImage\n  }\n}\n",{"version":3,"sources":["ViewProof.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ViewProof.vue","sourceRoot":"src/pages/welfare/views/common","sourcesContent":["<template>\n  <v-dialog\n    v-model=\"dialog\"\n    width=\"400\"\n  >\n    <v-btn\n      slot=\"activator\"\n      color=\"primary\"\n      small\n    >\n      上传凭证\n    </v-btn>\n    <v-card>\n      <v-card-title>\n      <div class=\"v-head-cus\">\n        <span>上传凭证</span>\n        <v-icon class=\"f-r\" @click=\"dialog = false\">close</v-icon>\n      </div>\n      </v-card-title>\n      <v-divider></v-divider>\n      <v-card-text>\n        上传凭证后，订单变为已确认状态，无法更新凭证，请确保核销凭证无误\n      </v-card-text>\n      <v-card-text class=\"proof-load-holder\">\n        <p class=\"proof-title\">核销凭证</p>\n        <uploadImage ref=\"uploadimage\" :maxNumber=\"1\" class=\"mr-2\"/>\n      </v-card-text>\n\n      <v-card-actions>\n        <v-spacer></v-spacer>\n        <v-btn\n          color=\"primary\"\n          @click=\"submit\" small\n        >\n          保存\n        </v-btn>\n        <v-btn\n          @click=\"dialog = false\" small\n        >\n          取消\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</template>\n<script>\nimport UploadImage from '../../components/UploadImage'\nimport Http from '@/http'\nexport default {\n  props: [\n    'item'\n  ],\n  data () {\n    return {\n      dialog: false,\n      loading3: false\n    }\n  },\n  watch: {\n    'dialog': function (val) {\n      if (val && this.item) {\n        this.$refs.uploadimage.previewImages.splice(0, 1, this.item.proof)\n        this.$refs.uploadimage.showAddBtn = false\n      }\n    }\n  },\n  methods: {\n    async submit () {\n      let img = this.$refs.uploadimage.previewImages[0]\n      if (this.item && this.item.id && img) {\n        let res = await Http.post('/travel/order/options', {\n          proof: img,\n          orderid: this.item.id,\n          status: 1\n        })\n        if (res && res.data) {\n          if (res.data.respcd === '0000') {\n            this.dialog = false\n            this.$emit('ctrl')\n            this.$store.dispatch('setAlert', {\n              alert: true,\n              alertContent: '操作成功',\n              alertType: 'success'\n            })\n          } else {\n            // 问题提示\n            this.$store.dispatch('setAlert', {\n              alert: true,\n              alertContent: res.data.respmsg,\n              alertType: 'error'\n            })\n          }\n        }\n      }\n    }\n  },\n  components: {\n    UploadImage\n  }\n}\n</script>\n<style scoped>\n.v-head-cus{text-align: center;width: 100%;position: relative;}\n.f-r{float: right;}\n.proof-load-holder{display: flex;align-items: center;}\n.proof-title{margin-right: 10px;}\n</style>\n"]}]}